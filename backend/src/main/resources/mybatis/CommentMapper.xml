<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.home.mapper.CommentMapper">

  <insert id="insertComment">
    INSERT INTO comment (review_id, user_id, content)
    VALUES (#{reviewId}, #{userId}, #{content})
  </insert>
  
  <delete id="deleteComment">
	  DELETE FROM comment WHERE comment_id = #{commentId}
  </delete>

  <select id="getCommentsByReviewId" resultType="com.ssafy.home.dto.Comment">
    SELECT	comment_id as commentId,
    		review_id as reviewId,
    		user_id as userId,
    		content,
    		created_at as createdAt
      FROM comment WHERE review_id = #{reviewId} ORDER BY created_at ASC
  </select>
  
  <select id="selectCommentsByUser" resultType="Comment">
    SELECT	comment_id as commentId,
    		review_id as reviewId,
    		user_id as userId,
    		content,
    		created_at as createdAt
    FROM comment
    WHERE user_id = #{userId}
    ORDER BY created_at DESC
  </select>
  

</mapper>
